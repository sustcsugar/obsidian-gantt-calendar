/*
========================================
Gantt Calendar Plugin Styles - 甘特日历
Architecture: ITCSS (Inverted Triangle CSS)
Last Updated: 2025-12-26
Author: sugar
========================================
*/

/* ========================================
   LAYER 1: Settings (配置层)
   CSS Variables & Custom Properties
   ======================================== */

:root {
	/* Festival Colors */
	--festival-solar-color: #e74c3c;    /* 阳历节日 - 红色 */
	--festival-lunar-color: #e8a041;    /* 农历节日 - 橙色 */
	--festival-solar-term-color: #52c41a; /* 节气 - 绿色 */

	/* Task Status Colors */
	--task-completed-color: #52c41a;
	--task-pending-color: #ff7a45;
}

/* ========================================
   LAYER 2: Tools (工具层)
   Not applicable for plain CSS
   ======================================== */

/* ========================================
   LAYER 3: Generic (通用层)
   Reset & Normalize
   ======================================== */
/* Obsidian默认样式，无需额外reset */

/* ========================================
   LAYER 4: Base (基础层)
   HTML Element Defaults
   ======================================== */
/* 本项目主要使用类名，基础样式较少 */

/* ========================================
   LAYER 5: Objects (对象层)
   Layout Structures (No Visuals)
   ======================================== */

/* Main Container */
.calendar-content {
	padding: 12px;
	flex: 1;
	display: flex;
	flex-direction: column;
	overflow-y: auto;
	overflow-x: hidden;
}

.calendar-content.gantt-mode {
	overflow: hidden;
	display: flex;
	flex-direction: column;
	flex: 1;
	min-height: 0;
}

/* Calendar Grid Layouts */
.gc-week-view__grid {
	display: flex;
	flex-direction: column;
	gap: 0;
	margin-top: 0;
	flex: 1;
	overflow: hidden;
	min-height: 0;
	position: relative;
}

.gc-week-view__header-row {
	display: grid;
	grid-template-columns: repeat(7, 1fr);
	gap: 0;
	flex-shrink: 0;
	z-index: 5;
	position: sticky;
	top: 0;
}

.gc-week-view__tasks-grid {
	display: grid;
	grid-template-columns: repeat(7, 1fr);
	gap: 0;
	overflow-y: auto;
	overflow-x: hidden;
	flex: 1 1 auto;
	min-height: 0;
	position: relative;
}

/* Gantt Layout Objects */
/* BEM命名: gc-view--gantt */
.gc-view.gc-view--gantt {
	display: flex;
	flex-direction: column;
	gap: 8px;
	width: 100%;
	height: 100%;
	min-height: 0;
	position: relative;
}

.gc-gantt-view__body {
	flex: 1 1 auto;
	min-height: 0;
	display: flex;
	gap: 0;
	overflow: hidden;
}

.gc-gantt-view__task-list {
	flex: 1 1 auto;
	overflow-y: auto;
	overflow-x: hidden;
	min-height: 0;
	padding-right: 4px;
	display: grid;
	grid-auto-rows: 40px;
	gap: 6px;
	align-content: start;
	scrollbar-width: none;
	-ms-overflow-style: none;
}

.gc-gantt-view__task-list::-webkit-scrollbar {
	display: none;
}

.gc-gantt-view__time {
	flex: 1 1 auto;
	min-width: 0;
	display: flex;
	flex-direction: column;
	position: relative;
	overflow: hidden;
}

.gc-gantt-view__bars-grid {
	display: grid;
	grid-auto-rows: 40px;
	gap: 6px;
	align-content: start;
}

/* ==================== Year/Month/Week Layout ==================== */
/* BEM命名: gc-view--year/--month/--week */
.gc-view.gc-view--year {
	display: flex;
	flex-direction: column;
	gap: 8px;
	height: 100%;
	overflow: hidden;
}

/* BEM: 年视图月份网格 */
.gc-view--year .gc-year-view__months {
	display: grid;
	grid-template-columns: repeat(4, 1fr);
	grid-template-rows: repeat(3, 1fr);
	gap: 6px;
	width: 100%;
	flex: 1;
	/* 响应式布局由 TypeScript 控制，基于实际CSS值动态计算 */
}

/* ========================================
   月视图单一Grid布局（7行8列）
   ======================================== */
.gc-view.gc-view--month {
	display: grid;
	/* 7行: 第1行星期标题(自动高度) + 6行日期(均分空间) */
	grid-template-rows: auto repeat(6, 1fr);
	/* 8列: 第1列周数(40px固定) + 7列星期(均分) */
	grid-template-columns: 40px repeat(7, 1fr);
	gap: 0;
	height: 100%;
	padding: 8px;
	overflow: hidden;
}

/* Week/Day Layout */
.gc-view.gc-view--week {
	display: flex;
	flex-direction: column;
	gap: 0;
	flex: 1;
	overflow: hidden;
	height: 100%;
}

.gc-week-view__days {
	display: grid;
	grid-template-columns: repeat(7, 1fr);
	gap: 12px;
}

/* ==================== Day View Layout ==================== */
/* BEM命名: gc-day-view, gc-view */
.gc-day-view,
.gc-view.gc-view--day {
	display: flex;
	flex-direction: column;
	gap: 12px;
	max-width: 100%;
	margin: 0;
	height: 100%;
	flex: 1;
	overflow: hidden;
	padding: 12px;
}

/* 水平分屏布局修饰符 */
.gc-day-view--horizontal {
	display: flex;
	gap: 0;
	width: 100%;
	height: 100%;
	flex: 1;
	min-height: 0;
}

/* 垂直分屏布局修饰符 */
.gc-day-view--vertical {
	display: flex;
	flex-direction: column;
	gap: 0;
	width: 100%;
	height: 100%;
	flex: 1;
	min-height: 0;
}

/* ==================== Task View Layout ==================== */
/* BEM命名: gc-view--task (Modifier) */
.gc-view--task {
	display: flex;
	flex-direction: column;
	gap: 6px;
	padding: 12px;
	height: auto;
	flex: none;
	overflow: visible;
	width: 100%;
}

/* ========================================
   LAYER 6: Components (组件层)
   Complete UI Components
   ======================================== */

/* 6.1 Toolbar Component */
/* BEM命名: gc-toolbar */
.calendar-toolbar,
.gc-toolbar {
	display: flex;
	flex-direction: row;
	align-items: center;
	justify-content: flex-start;
	gap: 12px;
	padding: 12px 16px;
	margin: 8px 12px 16px;
	position: sticky;
	top: 8px;
	border-radius: 14px;
	/* 玻璃效果核心 - 提高透明度 */
	background: color-mix(in srgb, var(--background-primary) 15%, transparent);
	border: 1px solid color-mix(in srgb, var(--background-modifier-border) 50%, transparent);
	/* 多层阴影营造深度 + 顶部高光 */
	box-shadow:
		0 4px 12px rgba(0, 0, 0, 0.06),
		0 8px 24px rgba(0, 0, 0, 0.1),
		inset 0 1px 0 rgba(255, 255, 255, 0.15);
	/* 提升饱和度增强玻璃质感 */
	backdrop-filter: blur(20px) saturate(180%);
	-webkit-backdrop-filter: blur(20px) saturate(180%);
	z-index: 100;
}

.gc-toolbar__left,
.gc-toolbar__center,
.gc-toolbar__right {
	display: flex;
	align-items: center;
	gap: 10px;
}

.gc-toolbar__left {
	flex: 0 1 auto;
}

.gc-toolbar__center {
	flex: 1 1 auto;
	display: flex;
	align-items: center;
	justify-content: center;
	min-width: 0;
	/* 防止内容溢出 */
	overflow: hidden;
}

.gc-toolbar__right {
	flex: 0 1 auto;
	justify-content: flex-end;
	gap: 6px;
}

.gc-nav {
	display: flex;
	align-items: center;
	gap: 12px;
	flex: 1;
}

.gc-toggle-group,
.gc-toolbar__view-toggle-group {
	display: flex;
	align-items: center;
	gap: 8px;
}

.gc-toolbar__view-toggle-btn {
	padding: 6px 12px;
	border: 1px solid var(--background-modifier-border);
	/* 玻璃效果 - 半透明背景 */
	background-color: color-mix(in srgb, var(--background-primary) 25%, transparent);
	border-radius: 6px;
	color: var(--text-normal);
	cursor: pointer;
	transition: all 0.15s ease;
	font-size: 13px;
	/* 按钮玻璃效果 */
	backdrop-filter: blur(8px);
	-webkit-backdrop-filter: blur(8px);
	box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
}

.gc-toolbar__view-toggle-btn--active {
	background-color: var(--interactive-accent);
	border-color: var(--interactive-accent);
	color: white;
	/* 选中时关闭模糊以提高对比度 */
	backdrop-filter: none;
}

.gc-toolbar__view-toggle-btn:hover {
	background-color: color-mix(in srgb, var(--background-primary) 35%, transparent);
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

/* 旧类名兼容 - toolbar-right-task-field-filter-group */
.gc-toolbar__field-filter-group {
	display: inline-flex;
	align-items: center;
	gap: 1px;
	padding: 1px;
	border-radius: 8px;
	background-color: color-mix(in srgb, var(--background-secondary) 35%, #888 5%);
	box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* 旧类名兼容 - toolbar-right-task-date-filter-group */
.gc-toolbar__date-filter-group {
	display: inline-flex;
	align-items: center;
	gap: 1px;
	padding: 1px;
	border-radius: 8px;
	background-color: color-mix(in srgb, var(--background-secondary) 70%, #888 10%);
	box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
	flex-wrap: wrap;
}

/* BEM: 日期输入框 */
.gc-toolbar__date-input {
	padding: 4px 2px 4px 6px;
	margin-left: 6px;
	width: 95px;
	border: 1px solid var(--input-border-color);
	border-radius: 4px;
	background-color: var(--background-secondary);
	color: var(--text-normal);
	font-size: 12px;
}

/* BEM: 日期模式按钮 */
.gc-toolbar__date-mode-btn {
	padding: 4px 8px;
	border: none;
	background-color: transparent;
	cursor: pointer;
	font-size: 12px;
	color: var(--text-muted);
	transition: all 0.15s ease;
}

.gc-toolbar__date-mode-btn:hover {
	background-color: var(--background-modifier-hover);
	color: var(--text-normal);
}

.gc-toolbar__date-mode-btn.active {
	background-color: #ff6b4a;
	border-color: #ff6b4a;
	color: white;
}

/* BEM: 导航按钮组 - 工具栏凹陷底座效果 */
.gc-toolbar__nav-buttons {
	display: flex;
	align-items: center;
	gap: 1px;
	padding: 1px;
	border-radius: 8px;
	background-color: color-mix(in srgb, var(--background-secondary) 35%, #888 5%);
	box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* BEM: 通用工具栏按钮 */
.gc-toolbar__btn {
	padding: 2px 6px;
	border: 1px solid var(--background-modifier-border);
	/* 玻璃效果 */
	background-color: color-mix(in srgb, var(--background-primary) 20%, transparent);
	border-radius: 4px;
	cursor: pointer;
	font-size: 12px;
	color: var(--text-muted);
	transition: all 0.15s ease;
	min-width: 24px;
	text-align: center;
	backdrop-filter: blur(6px);
	-webkit-backdrop-filter: blur(6px);
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
}

.gc-toolbar__btn:hover {
	background-color: color-mix(in srgb, var(--background-primary) 30%, transparent);
	color: var(--text-normal);
	border-color: var(--interactive-normal);
	box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
}

/* 导航按钮内的按钮 - 覆盖通用样式，适配凹陷底座 */
.gc-toolbar__nav-buttons .gc-toolbar__btn {
	padding: 4px 2px;
	border: none;
	background-color: transparent;
	color: var(--text-normal);
	cursor: pointer;
	font-size: 13px;
	min-width: 20px;
	text-align: center;
	backdrop-filter: none;
	box-shadow: none;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* 只含图标的按钮（左右箭头）- 稍大一点以容纳图标 */
.gc-toolbar__nav-buttons .gc-toolbar__btn:has(svg) {
	min-width: 24px;
	padding: 4px 4px;
}

/* 导航按钮内的按钮 - 简单悬停效果 */
.gc-toolbar__nav-buttons .gc-toolbar__btn:hover {
	background-color: var(--background-modifier-hover);
	color: var(--text-normal);
	border-color: transparent;
	box-shadow: none;
}

/* 导航按钮激活状态 */
.gc-toolbar__nav-buttons .gc-toolbar__btn.active {
	background-color: var(--interactive-accent);
	color: var(--text-on-accent);
}

.gc-toolbar__title-display {
	font-weight: 600;
	color: var(--text-normal);
	text-align: center;
	white-space: nowrap;
	/* 防止标题溢出，显示省略号 */
	overflow: hidden;
	text-overflow: ellipsis;
	max-width: 100%;
}

/* BEM: 视图选择器 */
.gc-toolbar__view-selector {
	display: flex;
	gap: 6px;
	justify-content: center;
}

/* ============================================
   6视图按钮组样式 (BEM: gc-toolbar__view-selector-group)
   参考设计: bg-black/20 凹陷容器 + 激活按钮凸起效果
   ============================================ */

/* 按钮组容器 - 凹陷底座效果 */
.gc-toolbar__view-selector-group {
	display: flex;
	align-items: center;
	gap: 0; /* 按钮紧密相邻，无间距 */
	padding: 4px; /* p-1 */
	border-radius: 8px; /* rounded-lg */
	/* 与灰色混合，产生轻微差异的背景色 */
	background-color: color-mix(in srgb, var(--background-secondary) 35%, #888 5%);
	/* 轻微 inset 阴影产生凹陷效果 */
	box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* 单个按钮 */
/* 使用 button 元素选择器提高特异性 (0,2,1)，并使用 !important 确保核心样式不被覆盖 */
.gc-toolbar__view-selector-group button.gc-toolbar__view-selector-btn {
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 4px;
	padding: 4px 8px !important;
	border: none !important;
	border-radius: 6px !important; /* rounded */
	background-color: transparent !important;
	/* 使用 Obsidian 变量确保主题兼容性 */
	color: var(--text-normal);
	cursor: pointer;
	/* 分属性过渡，背景色快速，transform 中速，阴影慢速 */
	transition: background-color 0.2s ease, color 0.2s ease, box-shadow 0.2s ease, transform 0.15s ease, font-weight 0.1s ease;
	font-size: 13px !important;
	font-weight: 500;
	min-width: 0;
	/* 重置可能的主题样式 */
	box-shadow: none !important;
	text-shadow: none !important;
	/* 防止主题设置背景图片 */
	background-image: none !important;
}

/* 按钮内容容器 */
.gc-toolbar__view-selector-btn .view-selector-btn-content {
	display: flex;
	align-items: center;
	gap: 6px;
}

/* 图标 */
.gc-toolbar__view-selector-icon {
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 16px;
	width: 18px;
	height: 18px;
	flex-shrink: 0;
}

/* 文字标签 */
.gc-toolbar__view-selector-label {
	line-height: 1;
}

/* 悬停状态 - 复用激活按钮的凸起效果 */
.gc-toolbar__view-selector-group button.gc-toolbar__view-selector-btn:hover:not(.gc-toolbar__view-selector-btn--active) {
	/* 使用强调色混合半透明背景，避免使用 opacity 实现平滑过渡 */
	background-color: color-mix(in srgb, var(--interactive-accent) 70%, transparent) !important;
	/* 凸起阴影效果 */
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
	/* 白色文字 */
	color: var(--text-on-accent) !important;
	transform: translateY(-1px);
}

/* 激活状态 - 凸起效果 */
/* 使用 button 元素选择器提高特异性 (0,2,1)，并使用 !important 确保核心样式不被覆盖 */
.gc-toolbar__view-selector-group button.gc-toolbar__view-selector-btn--active {
	/* 使用 Obsidian 强调色作为背景，使激活状态更明显 */
	background-color: var(--interactive-accent) !important;
	/* 凸起阴影效果 */
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.15) !important;
	/* 白色文字 */
	color: var(--text-on-accent) !important;
	font-weight: 600;
	transform: translateY(-1px);
}

/* ============================================
   响应式适配 - 基于容器宽度的响应式布局
   ============================================ */

/* 紧凑模式 - 当中间区域文本溢出时，左侧视图按钮只显示图标 */
.gc-toolbar--compact .gc-toolbar__view-selector-group .gc-toolbar__view-selector-label {
	display: none !important;
}

.gc-toolbar--compact .gc-toolbar__view-selector-group .gc-toolbar__view-selector-btn {
	padding: 6px 10px;
	min-width: 36px;
}

/* 仅图标模式 - 通过设置项控制 */
.gc-toolbar__view-selector-group--icon-only .gc-toolbar__view-selector-label {
	display: none !important;
}

.gc-toolbar__view-selector-group--icon-only .gc-toolbar__view-selector-btn {
	padding: 6px 10px;
	min-width: 36px;
}

/* 按钮隐藏状态 - 用于响应式管理器动态隐藏 */
.gc-toolbar__item--hidden {
	display: none !important;
}

/* 右侧区域包装容器样式 */
.gc-toolbar__right > div {
	display: flex;
	align-items: center;
}

/* 平滑过渡效果 */
.gc-toolbar__right > div {
	transition: opacity 0.15s ease;
}

/* 保持原有的媒体查询作为后备方案（针对窗口宽度的响应） */
/* 中等屏幕 (< 900px) - 视图按钮只显示图标 */
@media (max-width: 900px) {
	.gc-toolbar__view-selector-group button.gc-toolbar__view-selector-btn {
		padding: 6px 8px !important;
		min-width: 32px;
	}

	.gc-toolbar__view-selector-group button.gc-toolbar__view-selector-btn .gc-toolbar__view-selector-label {
		display: none;
	}

	.gc-toolbar__view-selector-group button.gc-toolbar__view-selector-btn--active .gc-toolbar__view-selector-label {
		display: inline;
	}
}

/* 小屏幕 (< 700px) - 隐藏工具栏部分次要功能 */
@media (max-width: 700px) {
	/* 减小工具栏内边距 */
	.calendar-toolbar,
	.gc-toolbar {
		gap: 8px;
	}

	/* 缩小按钮间距 */
	.gc-toolbar__left,
	.gc-toolbar__center,
	.gc-toolbar__right {
		gap: 6px;
	}
}

/* 极小屏幕 (< 550px) - 进一步优化 */
@media (max-width: 550px) {
	/* 激活按钮也只显示图标 */
	.gc-toolbar__view-selector-group button.gc-toolbar__view-selector-btn--active .gc-toolbar__view-selector-label {
		display: none;
	}

	/* 标题字体缩小 */
	.gc-toolbar__title-display {
		font-size: 13px;
	}

	/* 导航按钮缩小 */
	.gc-nav__btn {
		padding: 4px 8px;
		font-size: 12px;
	}
}

/* ============================================
   工具栏组件样式 (BEM: gc-toolbar)
   ============================================ */

/* BEM: 通用按钮组样式 */
.gc-toolbar__button-group {
	display: inline-flex;
	align-items: center;
	gap: 4px;
}

.gc-toolbar__button-group--horizontal {
	flex-direction: row;
}

.gc-toolbar__button-group--vertical {
	flex-direction: column;
}

/* BEM: 输入组样式 */
.gc-toolbar__input-group {
	display: inline-flex;
	align-items: center;
	gap: 6px;
}

/* BEM: 模式切换组样式 */
.gc-toolbar__mode-toggle-group {
	display: inline-flex;
	align-items: center;
	gap: 4px;
}

.gc-toolbar__mode-icon {
	font-size: 12px;
}

.gc-toolbar__mode-label {
	font-size: 13px;
	color: var(--text-normal);
}

/* 通用按钮组样式 - 下凹设计 */
.gc-toolbar__time-granularity-group--gantt,
.gc-toolbar__field-selector-dual-wrapper--gantt {
	display: inline-flex;
	align-items: center;
	gap: 1px;
	padding: 1px;
	border-radius: 8px;
	background-color: color-mix(in srgb, var(--background-secondary) 35%, #888 5%);
	box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* 甘特图时间颗粒度组内的按钮样式 */
.gc-toolbar__time-granularity-group--gantt .gc-toolbar__today-btn,
.gc-toolbar__time-granularity-group--gantt .gc-toolbar__time-granularity-btn {
	padding: 4px 6px;
	border: none;
	border-radius: 0;
	background-color: transparent;
	color: var(--text-muted);
	font-size: 13px;
	cursor: pointer;
	transition: all 0.2s ease;
}

.gc-toolbar__time-granularity-group--gantt .gc-toolbar__today-btn {
	background-color: var(--background-modifier-hover);
	color: var(--text-normal);
}

.gc-toolbar__time-granularity-group--gantt .gc-toolbar__today-btn:hover,
.gc-toolbar__time-granularity-group--gantt .gc-toolbar__time-granularity-btn:hover {
	background-color: var(--background-modifier-hover);
	color: var(--text-normal);
}

.gc-toolbar__time-granularity-group--gantt .gc-toolbar__time-granularity-btn--active {
	background-color: var(--interactive-accent);
	color: var(--text-on-accent);
	font-weight: 600;
}

/* 字段选择器组 */
.gc-toolbar__field-selector-group--gantt {
	display: inline-flex;
	align-items: center;
	gap: 6px;
}

/* 时间颗粒度按钮 */
.gc-toolbar__today-btn {
	padding: 4px 10px;
	border: none;
	border-radius: 4px;
	background-color: var(--background-modifier-hover);
	color: var(--text-normal);
	font-size: 13px;
	cursor: pointer;
	transition: all 0.2s ease;
}

.gc-toolbar__today-btn:hover {
	background-color: var(--interactive-accent);
	color: var(--text-on-accent);
}

.gc-toolbar__time-granularity-btn {
	padding: 4px 12px;
	border: none;
	border-radius: 4px;
	background-color: transparent;
	color: var(--text-muted);
	font-size: 13px;
	cursor: pointer;
	transition: all 0.2s ease;
}

.gc-toolbar__time-granularity-btn:hover {
	background-color: var(--background-modifier-hover);
	color: var(--text-normal);
}

.gc-toolbar__time-granularity-btn--active {
	background-color: var(--interactive-accent);
	color: var(--text-on-accent);
	font-weight: 600;
}

/* ============================================
   状态筛选按钮样式（复选框多选模式，现代 UI）
   ============================================ */

/* 状态筛选容器 - 下凹设计 */
.gc-toolbar__status-filter-container {
	display: inline-flex;
	gap: 1px;
	padding: 1px;
	border-radius: 8px;
	background-color: color-mix(in srgb, var(--background-secondary) 35%, #888 5%);
	box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* 状态筛选按钮 - 下凹设计 */
.gc-toolbar__status-filter-btn {
	position: relative;
	display: inline-flex;
	align-items: center;
	gap: 6px;
	padding: 4px 8px;
	border: none;
	border-radius: 0;
	background: transparent;
	color: var(--text-muted);
	font-size: 13px;
	cursor: pointer;
	transition: all 0.2s ease;
}

.gc-toolbar__status-filter-btn:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

.gc-toolbar__status-filter-btn--has-selection {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
}

.gc-toolbar__status-filter-icon {
	display: flex;
	align-items: center;
	justify-content: center;
}

.gc-toolbar__status-filter-icon svg {
	display: block;
}

/* ============================================
   状态筛选下拉面板样式
   ============================================ */

.gc-toolbar__status-filter-dropdown {
	position: fixed;
	z-index: 1000;
	min-width: 200px;
	max-width: 240px;
	background: color-mix(in srgb, var(--background-primary) 20%, transparent);
	border: 1px solid color-mix(in srgb, var(--background-modifier-border) 50%, transparent);
	border-radius: 8px;
	box-shadow:
		0 8px 24px rgba(0, 0, 0, 0.12),
		0 2px 6px rgba(0, 0, 0, 0.08),
		inset 0 1px 0 rgba(255, 255, 255, 0.15);
	padding: 0;
	overflow: hidden;
	backdrop-filter: blur(20px) saturate(180%);
	-webkit-backdrop-filter: blur(20px) saturate(180%);
}

.gc-toolbar__status-filter-dropdown-header {
	padding: 12px 16px;
	border-bottom: 1px solid color-mix(in srgb, var(--background-modifier-border) 40%, transparent);
	font-size: 13px;
	font-weight: 600;
	color: var(--text-normal);
}

.gc-toolbar__status-filter-dropdown-actions {
	padding: 8px 16px;
	border-bottom: 1px solid color-mix(in srgb, var(--background-modifier-border) 40%, transparent);
	display: flex;
	justify-content: flex-end;
}

.gc-toolbar__status-filter-dropdown-actions button {
	padding: 4px 12px;
	border: none;
	border-radius: 4px;
	background: transparent;
	color: var(--text-muted);
	font-size: 12px;
	cursor: pointer;
	transition: all 0.15s ease;
}

.gc-toolbar__status-filter-dropdown-actions button:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

.gc-toolbar__status-filter-list {
	max-height: 280px;
	overflow-y: auto;
	padding: 4px;
}

.gc-toolbar__status-filter-list::-webkit-scrollbar {
	width: 6px;
}

.gc-toolbar__status-filter-list::-webkit-scrollbar-track {
	background: transparent;
}

.gc-toolbar__status-filter-list::-webkit-scrollbar-thumb {
	background: var(--background-modifier-border);
	border-radius: 3px;
}

.gc-toolbar__status-filter-item {
	display: flex;
	align-items: center;
	gap: 10px;
	padding: 8px 10px;
	border-radius: 6px;
	cursor: pointer;
	transition: all 0.15s ease;
}

.gc-toolbar__status-filter-item:hover {
	background: color-mix(in srgb, var(--interactive-accent) 15%, transparent);
	backdrop-filter: blur(8px);
}

.gc-toolbar__status-filter-item--selected {
	background: color-mix(in srgb, var(--interactive-accent) 25%, transparent);
	box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

/* 复选框 */
.gc-toolbar__status-checkbox svg {
	display: block;
	flex-shrink: 0;
}

/* 状态标签 - 胶囊样式 */
.gc-toolbar__status-label {
	flex: 0 0 auto;
	display: inline-flex;
	align-items: center;
	padding: 4px 10px;
	border-radius: 12px;
	font-size: 13px;
	line-height: 1;
	white-space: nowrap;
}

/* 空状态 */
.gc-toolbar__status-filter-empty {
	padding: 24px 16px;
	text-align: center;
	color: var(--text-muted);
	font-size: 12px;
}

/* 排序按钮 */
.gc-toolbar__sort-btn {
	padding: 4px 10px;
	border: none;
	border-radius: 4px;
	background-color: transparent;
	color: var(--text-normal);
	font-size: 13px;
	cursor: pointer;
	transition: all 0.2s ease;
	display: inline-flex;
	align-items: center;
	gap: 4px;
}

.gc-toolbar__sort-btn:hover {
	background-color: var(--background-modifier-hover);
}

/* 标签筛选按钮 */
.gc-toolbar__tag-filter-btn {
	padding: 4px 10px;
	border: none;
	border-radius: 4px;
	background-color: transparent;
	color: var(--text-normal);
	font-size: 13px;
	cursor: pointer;
	transition: all 0.2s ease;
	display: inline-flex;
	align-items: center;
	gap: 4px;
}

.gc-toolbar__tag-filter-btn:hover {
	background-color: var(--background-modifier-hover);
}

.gc-toolbar__tag-filter-btn--has-selection {
	background-color: var(--interactive-accent);
	color: var(--text-on-accent);
}

/* 标签筛选按钮图标 */
.gc-toolbar__tag-filter-icon {
	font-size: 12px;
	line-height: 1;
}

/* 标签筛选数量徽章 */
.gc-toolbar__tag-filter-count {
	background-color: var(--interactive-accent);
	color: white;
	font-size: 9px;
	font-weight: 600;
	padding: 1px 4px;
	border-radius: 6px;
	min-width: 14px;
	text-align: center;
	line-height: 1.1;
}

.gc-toolbar__tag-filter-btn--has-selection .gc-toolbar__tag-filter-count {
	background-color: white;
	color: var(--interactive-accent);
}

/* 字段选择器 */
.gc-toolbar__field-selector-label {
	display: none;
}

.gc-toolbar__field-selector-select {
	padding: 4px 8px;
	border: none;
	border-radius: 4px;
	background-color: transparent;
	color: var(--text-normal);
	font-size: 12px;
	cursor: pointer;
}

/* ============================================
   排序下拉菜单样式 (BEM: gc-toolbar)
   ============================================ */

.gc-toolbar__sort-dropdown {
	position: fixed;
	z-index: 1000;
	background: color-mix(in srgb, var(--background-primary) 20%, transparent);
	border: 1px solid color-mix(in srgb, var(--background-modifier-border) 50%, transparent);
	border-radius: 6px;
	padding: 4px 0;
	min-width: 160px;
	box-shadow:
		0 8px 24px rgba(0, 0, 0, 0.12),
		0 2px 6px rgba(0, 0, 0, 0.08),
		inset 0 1px 0 rgba(255, 255, 255, 0.15);
	backdrop-filter: blur(20px) saturate(180%);
	-webkit-backdrop-filter: blur(20px) saturate(180%);
}

.gc-toolbar__sort-dropdown-header {
	padding: 8px 12px;
	font-size: 11px;
	color: var(--text-muted);
	border-bottom: 1px solid color-mix(in srgb, var(--background-modifier-border) 40%, transparent);
	margin-bottom: 4px;
}

.gc-toolbar__sort-menu-item {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 8px 12px;
	cursor: pointer;
	transition: all 0.15s ease;
	user-select: none;
}

.gc-toolbar__sort-menu-item:hover {
	background: color-mix(in srgb, var(--interactive-accent) 15%, transparent);
	backdrop-filter: blur(8px);
}

.gc-toolbar__sort-menu-item--active {
	background: color-mix(in srgb, var(--interactive-accent) 25%, transparent);
	color: var(--interactive-accent);
	box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.gc-toolbar__sort-option-icon {
	font-size: 14px;
	width: 20px;
	text-align: center;
}

.gc-toolbar__sort-option-label {
	flex: 1;
	font-size: 13px;
}

.gc-toolbar__sort-option-indicator {
	font-size: 12px;
	width: 20px;
	text-align: right;
}

.gc-toolbar__sort-icon {
	font-size: 14px;
}

.gc-toolbar__sort-dropdown-icon {
	font-size: 10px;
	opacity: 0.7;
}

/* ============================================
   标签筛选下拉菜单样式 (BEM: gc-toolbar)
   ============================================ */

.gc-toolbar__tag-filter-pane {
	position: fixed;
	z-index: 1000;
	background: color-mix(in srgb, var(--background-primary) 20%, transparent);
	border: 1px solid color-mix(in srgb, var(--background-modifier-border) 50%, transparent);
	border-radius: 6px;
	padding: 4px 6px;
	min-width: 140px;
	max-width: 180px;
	max-height: 280px;
	overflow-y: auto;
	box-shadow:
		0 8px 24px rgba(0, 0, 0, 0.12),
		0 2px 6px rgba(0, 0, 0, 0.08),
		inset 0 1px 0 rgba(255, 255, 255, 0.15);
	backdrop-filter: blur(20px) saturate(180%);
	-webkit-backdrop-filter: blur(20px) saturate(180%);
}

.gc-toolbar__tag-filter-pane::-webkit-scrollbar {
	width: 4px;
}

.gc-toolbar__tag-filter-pane::-webkit-scrollbar-track {
	background: transparent;
}

.gc-toolbar__tag-filter-pane::-webkit-scrollbar-thumb {
	background: var(--background-modifier-border);
	border-radius: 2px;
}

.gc-toolbar__tag-filter-pane::-webkit-scrollbar-thumb:hover {
	background: var(--text-muted);
}

.gc-toolbar__tag-filter-operators {
	display: flex;
	gap: 1px;
	padding-bottom: 3px;
	margin-bottom: 4px;
	border-bottom: 1px solid color-mix(in srgb, var(--background-modifier-border) 40%, transparent);
}

.gc-toolbar__tag-filter-operator-btn {
	flex: 0 1 auto;
	padding: 2px 3px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
	border-radius: 3px;
	cursor: pointer;
	font-size: 10px;
	font-weight: 500;
	color: var(--text-muted);
	transition: all 0.12s ease;
	text-align: center;
	line-height: 1.4;
	min-width: 24px;
}

.gc-toolbar__tag-filter-operator-btn:hover {
	background: var(--background-modifier-hover);
}

.gc-toolbar__tag-filter-operator-btn--active {
	background: var(--interactive-accent);
	color: white;
	border-color: var(--interactive-accent);
}

.gc-toolbar__tag-filter-tags-grid {
	display: flex;
	flex-wrap: wrap;
	gap: 3px;
}

.gc-toolbar__tag-filter-empty {
	padding: 12px;
	text-align: center;
	color: var(--text-muted);
	font-size: 11px;
}

.gc-toolbar__tag-filter-tag-item {
	display: inline-flex;
	align-items: center;
	gap: 2px;
	padding: 2px 5px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 10px;
	background: var(--background-primary);
	cursor: pointer;
	transition: all 0.12s ease;
	user-select: none;
	font-size: 11px;
}

.gc-toolbar__tag-filter-tag-item:hover {
	background: var(--background-modifier-hover);
	border-color: var(--background-modifier-border-hover);
}

/* 选中状态 - 更显眼的样式 */
.gc-toolbar__tag-filter-tag-item--selected {
	/* 使用深色渐变背景，确保白色文字清晰可见 */
	background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #a855f7 100%);
	border-color: #7c3aed;
	color: rgb(15, 14, 14);
	/* 添加外发光效果 */
	box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.3), 0 2px 8px rgba(139, 92, 246, 0.4);
	/* 轻微放大 */
	transform: scale(1.05);
}

.gc-toolbar__tag-filter-tag-name {
	font-size: 11px;
	font-weight: 500;
	color: var(--text-normal);
	line-height: 1.2;
}

.gc-toolbar__tag-filter-tag-item--selected .gc-toolbar__tag-filter-tag-name {
	color: white;
	font-weight: 600;
	text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

.gc-toolbar__tag-filter-tag-count {
	font-size: 9px;
	color: var(--text-muted);
	background: var(--background-modifier-border);
	padding: 1px 4px;
	border-radius: 6px;
	font-weight: 500;
	line-height: 1;
}

.gc-toolbar__tag-filter-tag-item--selected .gc-toolbar__tag-filter-tag-count {
	background: rgba(255, 255, 255, 0.9);
	color: #7c3aed;
	font-weight: 600;
}

/* 选中状态的悬停 - 保持紫色效果 */
.gc-toolbar__tag-filter-tag-item--selected:hover {
	background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #a855f7 100%);
	border-color: #7c3aed;
	box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.4), 0 4px 12px rgba(139, 92, 246, 0.5);
	transform: scale(1.08);
}

/* 响应式适配 */
@media (max-width: 768px) {
	.gc-toolbar__tag-filter-pane {
		min-width: 120px;
		max-width: 160px;
	}

	.gc-toolbar__tag-filter-tag-item {
		font-size: 10px;
		padding: 2px 5px;
	}

	.gc-toolbar__tag-filter-tag-name {
		font-size: 10px;
	}

	.gc-toolbar__tag-filter-tag-count {
		font-size: 8px;
		padding: 1px 3px;
	}
}

/* 6.2 Task Card Component (统一任务卡片) */
/* BEM命名: gc-task-card */
.gc-task-card {
	display: flex;
	align-items: center;
	padding: 8px;
	border-left: 3px solid transparent;
	background-color: var(--background-secondary);
	border-radius: 4px;
	cursor: pointer;
	transition: all 0.2s ease;
}

.gc-task-card:hover {
	background-color: var(--background-modifier-hover);
}

.gc-task-card__text {
	flex: 1;
	word-break: break-word;
	line-height: 1.4;
	color: var(--text-normal);
	overflow: hidden;
	text-overflow: ellipsis;
}

/* Task Card Modifiers */
.gc-task-card--task {
	padding: 10px;
	gap: 8px;
	flex-wrap: wrap;
	font-size: 13px;
}

.gc-task-card--day {
	padding: 10px;
	gap: 8px;
	flex-wrap: wrap;
	font-size: 13px;
}

.gc-task-card--week {
	padding: 8px;
	gap: 4px;
	font-size: 13px;
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* 周视图：给文本添加左侧间距，补偿复选框后的gap */
.gc-task-card--week .gc-task-card__text {
	margin-left: 4px;
}

/* 周视图：移除标签容器的额外左侧间距，避免与文本间距过大 */
.gc-task-card--week .gc-task-card__tags {
	margin-left: 0;
}

.gc-task-card--month {
	padding: 4px 6px;
	font-size: 11px;
	line-height: 1.3;
	border-left-width: 2px;
	border-radius: 3px;
}

.gc-task-card--gantt {
	padding: 8px 12px;
	border-left: 3px solid var(--interactive-accent);
	border-top: 1px solid var(--background-modifier-border);
	border-right: 1px solid var(--background-modifier-border);
	border-bottom: 1px solid var(--background-modifier-border);
	display: flex;
	align-items: center;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

/* ==================== Task Tags Component ==================== */
/* BEM命名: gc-tag (独立Block), gc-task-card__tags (作为任务卡Element) */

/* Tags inline container - 任务标签容器 */
.gc-task-card__tags {
	display: flex;
	flex-direction: row;
	align-items: center;
	gap: 4px;
	flex-wrap: wrap;
	margin-left: 4px;
}

/* ========================================
   Tag 组件统一样式
   BEM: gc-tag
   ======================================== */

/* Block 基础样式 */
.gc-tag {
	display: inline-flex;
	align-items: center;
	gap: 4px;
	font-size: 11px;
	font-weight: 500;
	padding: 3px 8px;
	background-color: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 12px;
	color: var(--text-normal);
	flex-shrink: 0;
	white-space: nowrap;
	transition: all 0.2s ease;
	cursor: default;
	user-select: none;
}

/* Hover 状态 - 排除已选中状态 */
.gc-tag:not(.gc-tag--selected):hover {
	background-color: var(--background-modifier-hover);
}

/* 可选状态 */
.gc-tag--selectable {
	cursor: pointer;
}

.gc-tag--selectable:active {
	transform: scale(0.96);
}

/* 选中状态 - 紫色发光效果 */
.gc-tag--selected {
	background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #a855f7 100%);
	border-color: #7c3aed;
	color: white;
	box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.3), 0 2px 8px rgba(139, 92, 246, 0.4);
	transform: scale(1.05);
}

.gc-tag--selected .gc-tag__label {
	color: white;
	font-weight: 600;
	text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

.gc-tag--selected .gc-tag__suffix {
	background: rgba(255, 255, 255, 0.9);
	color: #7c3aed;
	font-weight: 600;
}

/* 选中状态的悬停 - 保持紫色效果 */
.gc-tag--selected:hover {
	background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #a855f7 100%);
	border-color: #7c3aed;
	box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.4), 0 4px 12px rgba(139, 92, 246, 0.5);
	transform: scale(1.08);
}

/* Elements */
.gc-tag__label {
	line-height: 1.2;
}

.gc-tag__suffix {
	font-size: 9px;
	color: var(--text-muted);
	background-color: var(--background-modifier-border);
	padding: 1px 4px;
	border-radius: 6px;
	font-weight: 500;
	line-height: 1;
}

/* 颜色变体（6种颜色，基于hash自动分配） */
.gc-tag--color-0 {
	background-color: rgba(56, 132, 255, 0.1);
	border-color: rgba(56, 132, 255, 0.2);
	color: #3884ff;
}

.gc-tag--color-1 {
	background-color: rgba(34, 197, 94, 0.1);
	border-color: rgba(34, 197, 94, 0.2);
	color: #22c55e;
}

.gc-tag--color-2 {
	background-color: rgba(249, 115, 22, 0.1);
	border-color: rgba(249, 115, 22, 0.2);
	color: #f97316;
}

.gc-tag--color-3 {
	background-color: rgba(234, 179, 8, 0.1);
	border-color: rgba(234, 179, 8, 0.2);
	color: #eab308;
}

.gc-tag--color-4 {
	background-color: rgba(168, 85, 247, 0.1);
	border-color: rgba(168, 85, 247, 0.2);
	color: #a855f7;
}

.gc-tag--color-5 {
	background-color: rgba(236, 72, 153, 0.1);
	border-color: rgba(236, 72, 153, 0.2);
	color: #ec4899;
}

/* Tooltip Tags */
.gc-task-tooltip__tags {
	display: flex;
	flex-direction: row;
	align-items: center;
	gap: 6px;
	flex-wrap: wrap;
	margin-top: 8px;
	padding: 8px;
	background-color: var(--background-secondary);
	border-radius: 4px;
}

/* ==================== 响应式设计 ==================== */

/* 小屏幕适配 */
@media (max-width: 768px) {
	.gc-tag {
		font-size: 10px;
		padding: 1px 6px;
	}

	.gc-task-card__tags {
		gap: 3px;
	}
}

/* 月视图小屏幕 - 限制标签显示 */
.gc-task-card--month .gc-task-card__tags {
	max-width: 100%;
	overflow: hidden;
}

.gc-task-card--month .gc-tag {
	max-width: 60px;
	overflow: hidden;
	text-overflow: ellipsis;
}

/* 6.3 Year View Components */
/* 月卡片 - BEM类名: gc-year-view__month-card */
.gc-year-view__month-card {
	background-color: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	padding: 6px;
	overflow: hidden;
	display: flex;
	flex-direction: column;
	height: 100%;
}

/* 月份标题 - BEM类名: gc-year-view__month-header */
.gc-year-view__month-header {
	text-align: center;
	margin-bottom: 4px;
	border-bottom: none;
	padding-bottom: 2px;
}

.gc-year-view__month-header h3 {
	font-size: 12px;
	font-weight: 600;
	margin: 0;
	color: var(--text-muted);
}

/* 星期标签容器 - BEM类名: gc-year-view__weekdays */
.gc-year-view__weekdays {
	display: grid !important;
	grid-template-columns: repeat(7, 1fr);
	width: 100%;
	margin-bottom: 1px;
}

/* 星期标签 - BEM类名: gc-year-view__weekday */
.gc-year-view__weekday {
	text-align: center;
	font-size: 9px;
	font-weight: 500;
	color: var(--text-faint);
	padding: 1px 0;
}

/* 日期网格 - BEM类名: gc-year-view__days-grid */
.gc-year-view__days-grid {
	display: grid;
	grid-template-columns: repeat(7, 1fr);
	flex: 1;
	gap: 2px;
}

/* 日期单元格 - BEM类名: gc-year-view__day */
.gc-year-view__day {
	aspect-ratio: 1;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	gap: 0;
	padding: 1px;
	border-radius: 12px;
	cursor: pointer;
	background-color: transparent;
	border: none;
	transition: transform 0.5s cubic-bezier(0.23, 1, 0.32, 1), box-shadow 0.4s ease-out;
	min-height: 0;
}

/* 日期数字 - BEM类名: gc-year-view__day-number */
.gc-year-view__day-number {
	font-size: 13px;
	font-weight: 400;
	color: var(--text-normal);
	line-height: 1;
}

/* 农历文本 - BEM类名: gc-year-view__lunar-text */
.gc-year-view__lunar-text {
	font-size: 7px;
	color: var(--text-faint);
	text-align: center;
	line-height: 1;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}

/* 年视图月卡片中的农历字体大小可调 */
.gc-year-view__month-card .gc-year-view__lunar-text {
	font-size: var(--year-lunar-font-size, 10px);
}

/* 年视图农历始终显示 */
.gc-view--year .gc-year-view__lunar-text {
	display: block;
}

/* 6.4 Month View Components */
/* 星期标签 - 位于Grid第1行 */
.gc-month-view__weekday {
	font-size: 16px;
	font-weight: 600;
	color: var(--text-muted);
	text-align: center;
	padding: 8px 4px;
	/* 网格线：上右有边框 */
	/*border-top: 2px solid var(--background-modifier-border);*/
	border-right: 2px solid var(--background-modifier-border);
	/* 确保在Grid第1行 */
	grid-row: 1;
}

/* 空占位 - 第1行第1列 */
.gc-month-view__weekday--empty {
	visibility: hidden;
}

/* 周编号 - 位于每周的第1列 */
.gc-month-view__week-number {
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 11px;
	font-weight: 600;
	color: var(--text-muted);
	/* 网格线：上右有边框 */
	border-top: 2px solid var(--background-modifier-border);
	border-right: 2px solid var(--background-modifier-border);
	/* grid位置由JavaScript内联样式设置 */
}

/* BEM类名: gc-month-view__day-cell */
.gc-month-view__day-cell {
	min-height: 100px;
	display: flex;
	flex-direction: column;
	align-items: stretch;
	justify-content: flex-start;
	padding: 8px;
	gap: 4px;
	background-color: var(--background-primary);
	/* 网格线：上右有边框，左下由相邻单元格提供 */
	border-top: 2px solid var(--background-modifier-border);
	border-right: 2px solid var(--background-modifier-border);
	cursor: pointer;
	transition: all 0.15s ease;
	overflow: hidden;
}

/* 日期头部：日期数字和农历文本的横向布局容器 */
.gc-month-view__day-header {
	display: flex;
	flex-direction: row;
	justify-content: center;
	align-items: center;
	width: 100%;
	padding: 0 25%;
	margin-bottom: 4px;
	border-bottom: 1px solid var(--background-modifier-border);
	gap: 8px;
}

/* 日期头部中间的分隔圆点 */
.gc-month-view__day-header-separator {
	width: 4px;
	height: 4px;
	background-color: var(--text-muted);
	border-radius: 50%;
	flex-shrink: 0;
}

/* BEM类名: gc-month-view__day-number */
.gc-month-view__day-cell .gc-month-view__day-number {
	font-size: 18px;
	font-weight: 500;
	color: var(--text-normal);
}

/* BEM类名: gc-month-view__lunar-text */
.gc-month-view__day-cell .gc-month-view__lunar-text {
	font-size: 18px;
	font-weight: 500;
	color: var(--text-normal);
}

/* BEM类名: gc-month-view__tasks */
.gc-month-view__tasks {
	display: flex;
	flex-direction: column;
	gap: 4px;
	width: 100%;
	margin-top: 4px;
	flex: 1;
	overflow: hidden;
}

/* 任务数量 - BEM类名: gc-year-view__task-count */
.gc-year-view__task-count {
	font-size: 10px;
	color: var(--text-muted);
	margin-top: 2px;
}

.gc-week-view__tasks-column {
	border-right: 1px solid var(--background-modifier-border);
	padding: 8px;
	overflow-y: auto;
	overflow-x: hidden;
	display: flex;
	flex-direction: column;
	gap: 8px;
	background-color: var(--background-primary);
}

.gc-week-view__tasks-column:last-child {
	border-right: none;
}

.gc-week-view__header-cell {
	padding: 12px 20%;
	text-align: center;
	border-right: 1px solid var(--background-modifier-border);
	border-bottom: 2px solid var(--background-modifier-border);
	display: flex;
	flex-direction: row;
	align-items: center;
	justify-content: space-between;
	gap: 6px;
	background-color: var(--background-primary);
	position: sticky;
	top: 0;
	z-index: 4;
}

.gc-week-view__header-cell:last-child {
	border-right: none;
}

.gc-week-view__day-name {
	flex: 1;
	font-size: 16px;
	font-weight: 500;
	color: var(--text-normal);
	text-align: left;
}

.gc-week-view__day-number {
	flex: 1;
	font-size: 16px;
	font-weight: 500;
	color: var(--text-normal);
	text-align: center;
}

.gc-week-view__lunar-text {
	flex: 1;
	font-size: 16px;
	font-weight: 500;
	color: var(--text-normal);
	text-align: right;
}

/* ==================== Task Tooltip ==================== */
/* BEM命名: gc-task-tooltip */
.gc-task-tooltip {
	position: fixed;
	z-index: 1000;
	background-color: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
	padding: 12px;
	max-width: 300px;
	min-width: 250px;
	font-size: 13px;
	line-height: 1.5;
	pointer-events: none;
	opacity: 0;
	transform: translateY(-8px) scale(0.95);
	transition: opacity 0.2s cubic-bezier(0.4, 0, 0.2, 1),
	            transform 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.gc-task-tooltip--visible {
	opacity: 1;
	transform: translateY(0) scale(1);
}

.gc-task-tooltip .gc-task-tooltip__description {
	margin-bottom: 8px;
	padding-bottom: 8px;
	border-bottom: 1px solid var(--divider-color);
	color: var(--text-normal);
	word-break: break-word;
}

.gc-task-tooltip .gc-task-tooltip__description strong {
	font-weight: 600;
	font-size: 14px;
}

.gc-task-tooltip .gc-task-tooltip__priority {
	margin-bottom: 8px;
	padding: 4px 0;
	font-weight: 500;
}

.gc-task-tooltip .priority-highest {
	color: #d73a49;
}

.gc-task-tooltip .priority-high {
	color: #e36209;
}

.gc-task-tooltip .priority-medium {
	color: #ffd33d;
}

.gc-task-tooltip .priority-low {
	color: #28a745;
}

.gc-task-tooltip .priority-lowest {
	color: #0366d6;
}

.gc-task-tooltip .gc-task-tooltip__times {
	display: flex;
	flex-direction: column;
	gap: 4px;
	margin-bottom: 8px;
	padding: 8px;
	background-color: var(--background-secondary);
	border-radius: 4px;
}

.gc-task-tooltip .gc-task-tooltip__time-item {
	font-size: 12px;
	color: var(--text-muted);
	padding: 2px 0;
}

.gc-task-tooltip .gc-task-tooltip__time-item--overdue {
	color: #d73a49;
	font-weight: 600;
}

.gc-task-tooltip .gc-task-tooltip__file {
	padding-top: 8px;
	border-top: 1px solid var(--divider-color);
	font-size: 11px;
	color: var(--text-muted);
}

.gc-week-view__empty {
	padding: 16px 8px;
	text-align: center;
	color: var(--text-muted);
	font-size: 12px;
}

/* ==================== Day View Sub-Components ==================== */
/* BEM命名: gc-day-view Elements */
.gc-day-view__task-list {
	display: flex;
	flex-direction: column;
	gap: 8px;
	overflow-y: auto;
	flex: 1;
	min-height: 0;
}

.gc-day-view--horizontal .gc-day-view__section--tasks {
	flex: 1 1 50%;
	display: flex;
	flex-direction: column;
	overflow: hidden;
	padding-right: 8px;
	border-right: 1px solid var(--divider-color);
	min-height: 0;
}

.gc-day-view--tasks-only {
	display: flex;
	flex-direction: column;
	overflow: hidden;
	width: 100%;
	height: 100%;
	min-height: 0;
}

.gc-day-view--horizontal .gc-day-view__section--notes {
	flex: 1 1 50%;
	display: flex;
	flex-direction: column;
	overflow: hidden;
	padding-left: 8px;
	min-height: 0;
}

.gc-day-view__divider {
	width: 8px;
	background-color: transparent;
	cursor: col-resize;
	transition: background-color 0.2s;
	flex-shrink: 0;
}

.gc-day-view__divider:hover {
	background-color: var(--interactive-accent);
}

.gc-day-view--vertical .gc-day-view__section--tasks {
	flex: 1 1 50%;
	display: flex;
	flex-direction: column;
	overflow: hidden;
	padding-bottom: 8px;
	border-bottom: 1px solid var(--divider-color);
	min-height: 0;
}

.gc-day-view--vertical .gc-day-view__title {
	margin: 0 0 12px 0;
	font-size: 14px;
	font-weight: 600;
	color: var(--text-normal);
	display: flex;
	align-items: center;
	gap: 8px;
	flex-shrink: 0;
}

.gc-day-view--vertical .gc-day-view__task-list {
	display: flex;
	flex-direction: column;
	gap: 8px;
	overflow-y: auto;
	flex: 1;
	min-height: 0;
}

.gc-day-view--vertical .gc-day-view__section--notes {
	flex: 1 1 50%;
	display: flex;
	flex-direction: column;
	overflow: hidden;
	padding-top: 8px;
	min-height: 0;
}

.gc-day-view__divider--vertical {
	height: 8px;
	background-color: transparent;
	cursor: row-resize;
	transition: background-color 0.2s;
	flex-shrink: 0;
}

.gc-day-view__notes-body {
	font-size: 12px;
	line-height: 1.6;
	color: var(--text-normal);
}

/* Priority badge inline */
/* BEM命名: gc-task-card__priority, gc-task-card__priority-badge */
.gc-task-card__priority {
	display: flex;
	align-items: center;
	gap: 4px;
}

.gc-task-card__priority-badge {
	font-size: 16px;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	width: 20px;
	height: 20px;
	border-radius: 50%;
	flex-shrink: 0;
}

.gc-task-card__priority-badge--highest {
	background-color: rgba(239, 68, 68, 0.1);
}

.gc-task-card__priority-badge--high {
	background-color: rgba(249, 115, 22, 0.1);
}

.gc-task-card__priority-badge--medium {
	background-color: rgba(234, 179, 8, 0.1);
}

.gc-task-card__priority-badge--low {
	background-color: rgba(34, 197, 94, 0.1);
}

.gc-task-card__priority-badge--lowest {
	background-color: rgba(59, 130, 246, 0.1);
}

/* Time properties inline */
/* BEM命名: gc-task-card__times, gc-task-card__time-badge */
.gc-task-card__times {
	display: flex;
	flex-direction: row;
	align-items: center;
	gap: 6px;
	flex-wrap: wrap;
}

.gc-task-card__time-badge {
	display: flex;
	align-items: center;
	font-size: 11px;
	padding: 2px 6px;
	background-color: var(--background-primary);
	border-radius: 3px;
	color: var(--text-muted);
	flex-shrink: 0;
	white-space: nowrap;
}

.gc-task-card__time-badge--overdue {
	color: #ef4444;
	background-color: rgba(239, 68, 68, 0.1);
	font-weight: 500;
}

.gc-task-card__file {
	display: flex;
	align-items: center;
	font-size: 10px;
	color: var(--text-muted);
	margin-left: auto;
	flex-shrink: 0;
	white-space: nowrap;
}

/* Warning Icon - 任务警告图标 */
/* BEM命名: gc-task-card__warning */
.gc-task-card__warning {
	display: inline-flex;
	align-items: center;
	margin-left: 8px;
	font-size: 14px;
	cursor: help;
	transition: transform 0.2s ease;
}

.gc-task-card__warning:hover {
	transform: scale(1.2);
}

/* 6.9 Heatmap Components */
/* 热力图色卡：蓝、绿、红（5级） - BEM类名支持 */
/* 为年视图新类名添加热力图样式，排除非当月日期 */
.gc-year-view__day:not(.outside-month).heatmap-blue-1 { background-image: none; background-color: rgba(56, 132, 255, 0.12) !important; }
.gc-year-view__day:not(.outside-month).heatmap-blue-2 { background-image: none; background-color: rgba(56, 132, 255, 0.22) !important; }
.gc-year-view__day:not(.outside-month).heatmap-blue-3 { background-image: none; background-color: rgba(56, 132, 255, 0.32) !important; }
.gc-year-view__day:not(.outside-month).heatmap-blue-4 { background-image: none; background-color: rgba(56, 132, 255, 0.44) !important; }
.gc-year-view__day:not(.outside-month).heatmap-blue-5 { background-image: none; background-color: rgba(56, 132, 255, 0.58) !important; }

.gc-year-view__day:not(.outside-month).heatmap-green-1 { background-image: none; background-color: rgba(82, 196, 26, 0.12) !important; }
.gc-year-view__day:not(.outside-month).heatmap-green-2 { background-image: none; background-color: rgba(82, 196, 26, 0.22) !important; }
.gc-year-view__day:not(.outside-month).heatmap-green-3 { background-image: none; background-color: rgba(82, 196, 26, 0.32) !important; }
.gc-year-view__day:not(.outside-month).heatmap-green-4 { background-image: none; background-color: rgba(82, 196, 26, 0.44) !important; }
.gc-year-view__day:not(.outside-month).heatmap-green-5 { background-image: none; background-color: rgba(82, 196, 26, 0.58) !important; }

.gc-year-view__day:not(.outside-month).heatmap-red-1 { background-image: none; background-color: rgba(231, 76, 60, 0.12) !important; }
.gc-year-view__day:not(.outside-month).heatmap-red-2 { background-image: none; background-color: rgba(231, 76, 60, 0.22) !important; }
.gc-year-view__day:not(.outside-month).heatmap-red-3 { background-image: none; background-color: rgba(231, 76, 60, 0.32) !important; }
.gc-year-view__day:not(.outside-month).heatmap-red-4 { background-image: none; background-color: rgba(231, 76, 60, 0.44) !important; }
.gc-year-view__day:not(.outside-month).heatmap-red-5 { background-image: none; background-color: rgba(231, 76, 60, 0.58) !important; }

.gc-year-view__day:not(.outside-month).heatmap-purple-1 { background-image: none; background-color: rgba(142, 68, 173, 0.12) !important; }
.gc-year-view__day:not(.outside-month).heatmap-purple-2 { background-image: none; background-color: rgba(142, 68, 173, 0.22) !important; }
.gc-year-view__day:not(.outside-month).heatmap-purple-3 { background-image: none; background-color: rgba(142, 68, 173, 0.32) !important; }
.gc-year-view__day:not(.outside-month).heatmap-purple-4 { background-image: none; background-color: rgba(142, 68, 173, 0.44) !important; }
.gc-year-view__day:not(.outside-month).heatmap-purple-5 { background-image: none; background-color: rgba(142, 68, 173, 0.58) !important; }

.gc-year-view__day:not(.outside-month).heatmap-orange-1 { background-image: none; background-color: rgba(245, 124, 0, 0.12) !important; }
.gc-year-view__day:not(.outside-month).heatmap-orange-2 { background-image: none; background-color: rgba(245, 124, 0, 0.22) !important; }
.gc-year-view__day:not(.outside-month).heatmap-orange-3 { background-image: none; background-color: rgba(245, 124, 0, 0.32) !important; }
.gc-year-view__day:not(.outside-month).heatmap-orange-4 { background-image: none; background-color: rgba(245, 124, 0, 0.44) !important; }
.gc-year-view__day:not(.outside-month).heatmap-orange-5 { background-image: none; background-color: rgba(245, 124, 0, 0.58) !important; }

.gc-year-view__day:not(.outside-month).heatmap-cyan-1 { background-image: none; background-color: rgba(0, 188, 212, 0.12) !important; }
.gc-year-view__day:not(.outside-month).heatmap-cyan-2 { background-image: none; background-color: rgba(0, 188, 212, 0.22) !important; }
.gc-year-view__day:not(.outside-month).heatmap-cyan-3 { background-image: none; background-color: rgba(0, 188, 212, 0.32) !important; }
.gc-year-view__day:not(.outside-month).heatmap-cyan-4 { background-image: none; background-color: rgba(0, 188, 212, 0.44) !important; }
.gc-year-view__day:not(.outside-month).heatmap-cyan-5 { background-image: none; background-color: rgba(0, 188, 212, 0.58) !important; }

.gc-year-view__day:not(.outside-month).heatmap-pink-1 { background-image: none; background-color: rgba(233, 30, 99, 0.12) !important; }
.gc-year-view__day:not(.outside-month).heatmap-pink-2 { background-image: none; background-color: rgba(233, 30, 99, 0.22) !important; }
.gc-year-view__day:not(.outside-month).heatmap-pink-3 { background-image: none; background-color: rgba(233, 30, 99, 0.32) !important; }
.gc-year-view__day:not(.outside-month).heatmap-pink-4 { background-image: none; background-color: rgba(233, 30, 99, 0.44) !important; }
.gc-year-view__day:not(.outside-month).heatmap-pink-5 { background-image: none; background-color: rgba(233, 30, 99, 0.58) !important; }

.gc-year-view__day:not(.outside-month).heatmap-yellow-1 { background-image: none; background-color: rgba(255, 193, 7, 0.12) !important; }
.gc-year-view__day:not(.outside-month).heatmap-yellow-2 { background-image: none; background-color: rgba(255, 193, 7, 0.22) !important; }
.gc-year-view__day:not(.outside-month).heatmap-yellow-3 { background-image: none; background-color: rgba(255, 193, 7, 0.32) !important; }
.gc-year-view__day:not(.outside-month).heatmap-yellow-4 { background-image: none; background-color: rgba(255, 193, 7, 0.44) !important; }
.gc-year-view__day:not(.outside-month).heatmap-yellow-5 { background-image: none; background-color: rgba(255, 193, 7, 0.58) !important; }

/* 热力图3D效果 - 第一档：轻微突起 */
.gc-year-view__day:not(.outside-month).heatmap-3d-1[class*="heatmap-"] {
	box-shadow:
		inset 0 1px 1px rgba(255, 255, 255, 0.4),
		inset 0 -1px 1px rgba(0, 0, 0, 0.05),
		0 2px 4px rgba(0, 0, 0, 0.08);
	position: relative;
}

.gc-year-view__day:not(.outside-month).heatmap-3d-1[class*="heatmap-"]::after {
	content: '';
	position: absolute;
	top: 2px;
	left: 10%;
	right: 10%;
	height: 40%;
	background: linear-gradient(
		to bottom,
		rgba(255, 255, 255, 0.25),
		rgba(255, 255, 255, 0)
	);
	border-radius: 8px 8px 4px 4px;
	pointer-events: none;
	opacity: 0.7;
}

/* 热力图3D效果 - 第二档：明显突起 */
.gc-year-view__day:not(.outside-month).heatmap-3d-2[class*="heatmap-"] {
	/* 内阴影创造深度感，底部深色阴影避免白色边缘 */
	box-shadow:
		/* 内阴影 - 顶部高光 */
		inset 0 2px 4px rgba(255, 255, 255, 0.5),
		/* 内阴影 - 底部深色阴影（避免白色边缘） */
		inset 0 -2px 6px rgba(0, 0, 0, 0.15),
		/* 内阴影 - 左右边缘 */
		inset 1px 0 2px rgba(255, 255, 255, 0.25),
		inset -1px 0 2px rgba(0, 0, 0, 0.1),
		/* 外阴影 - 柔和突起 */
		0 2px 6px rgba(0, 0, 0, 0.1),
		0 4px 12px rgba(0, 0, 0, 0.06);
	position: relative;
}

/* 玻璃顶部高光反射 - 第二档 */
.gc-year-view__day:not(.outside-month).heatmap-3d-2[class*="heatmap-"]::after {
	content: '';
	position: absolute;
	top: 2px;
	left: 10%;
	right: 10%;
	height: 40%;
	background: linear-gradient(
		to bottom,
		rgba(255, 255, 255, 0.35) 0%,
		rgba(255, 255, 255, 0.15) 40%,
		rgba(255, 255, 255, 0) 100%
	);
	border-radius: 8px 8px 4px 4px;
	pointer-events: none;
}

/* Heatmap palette setting (tiled single-select) */
.heatmap-palette-setting {
	display: flex;
	flex-direction: column;
	gap: 8px;
	padding: 12px 0;
	border-bottom: 1px solid var(--background-modifier-border);
}

.heatmap-palette-label {
	padding: 0 10px;
}

.heatmap-palette-name {
	font-weight: 600;
	color: var(--text-normal);
	margin-bottom: 4px;
}

.heatmap-palette-desc {
	font-size: 12px;
	color: var(--text-muted);
}

.heatmap-palette-list {
	display: grid;
	grid-template-columns: repeat(4, 1fr);
	gap: 12px;
	padding: 8px 10px;
}

.heatmap-palette-option {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 8px 10px;
	border: 2px solid transparent;
	border-radius: 8px;
	cursor: pointer;
	transition: all 0.2s ease;
	background: var(--background-secondary);
}

.heatmap-palette-option:hover {
	transform: translateY(-1px);
	box-shadow: 0 2px 8px rgba(0,0,0,0.12);
}

.heatmap-palette-option.selected {
	border-color: var(--interactive-accent);
}

.heatmap-palette-bars {
	display: grid;
	grid-auto-flow: column;
	grid-auto-columns: 14px;
	gap: 3px;
}

.heatmap-palette-bar {
	width: 14px;
	height: 14px;
	border-radius: 2px;
	background-color: var(--background-modifier-border);
}

.heatmap-palette-label-text {
	font-size: 12px;
	color: var(--text-muted);
}

/* Festival Color Settings */
.festival-color-settings-container {
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	gap: 16px;
	padding: 12px 0;
	margin-bottom: 16px;
}

.festival-color-setting {
	display: flex;
	flex-direction: column;
	gap: 8px;
	padding: 12px;
	background: var(--background-secondary);
	border-radius: 8px;
}

.festival-color-label {
	padding: 0 10px;
}

.festival-color-name {
	font-weight: 600;
	color: var(--text-normal);
	margin-bottom: 4px;
}

.festival-color-desc {
	font-size: 12px;
	color: var(--text-muted);
}

.festival-color-picker {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 8px 10px;
	flex-wrap: wrap;
}

.festival-color-input {
	display: none;
}

.festival-color-swatch {
	width: 14px;
	height: 14px;
	border-radius: 2px;
	cursor: pointer;
	transition: all 0.2s ease;
	flex-shrink: 0;
}

.festival-color-swatch:hover {
	transform: scale(1.1);
	box-shadow: 0 1px 4px rgba(0, 0, 0, 0.15);
}

/* Task Status Setting */
.task-status-setting {
	margin-top: 12px;
}

.task-status-label {
	padding: 0 10px;
	margin-bottom: 12px;
}

.task-status-name {
	font-weight: 600;
	color: var(--text-normal);
	margin-bottom: 4px;
}

.task-status-desc {
	font-size: 12px;
	color: var(--text-muted);
}

/* ========================================
   LAYER 7: Themes (主题层)
   Visual States & Modifiers
   ======================================== */

/* 7.1 Task Status States (高特指性) */


/* Task View 容器 */
.gc-view--task .gc-task-card--task.gc-task-card--completed {
	opacity: 0.65;
	border-left-color: var(--task-completed-color);
}

.gc-view--task .gc-task-card--task.gc-task-card--pending {
	border-left-color: var(--task-pending-color);
}

/* Day View 容器 */
.gc-day-view__task-list .gc-task-card--day.gc-task-card--completed {
	opacity: 0.65;
	border-left-color: var(--task-completed-color);
}

.gc-day-view__task-list .gc-task-card--day.gc-task-card--pending {
	border-left-color: var(--task-pending-color);
}


/* Week View */
.gc-week-view__tasks-grid .gc-task-card--week.gc-task-card--completed {
	opacity: 0.6;
	border-left-color: var(--task-completed-color);
}

.gc-week-view__tasks-grid .gc-task-card--week.gc-task-card--pending {
	border-left-color: var(--task-pending-color);
}

/* Month View */
/* BEM类名: gc-month-view__tasks */
.gc-month-view__tasks .gc-task-card--month.gc-task-card--completed {
	opacity: 0.5;
	border-left-color: var(--task-completed-color);
}

.gc-month-view__tasks .gc-task-card--month.gc-task-card--pending {
	border-left-color: var(--task-pending-color);
}

/* Gantt View */
.gc-task-card--gantt.gc-task-card--completed {
	opacity: 0.7;
	border-left-color: var(--task-completed-color);
}

.gc-task-card--gantt.gc-task-card--pending {
	border-left-color: var(--task-pending-color);
}

/* 7.2 Interactive States (hover, active) */
.gc-task-card--day:hover {
	transform: translateX(4px);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.gc-task-card--week:hover {
	transform: translateX(2px);
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.gc-task-card--month:hover {
	transform: translateX(1px);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.gc-task-card--gantt:hover {
	transform: translateX(2px);
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.gc-task-card--task:hover {
	transform: translateX(4px);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* 年视图日期悬停效果 */
.gc-year-view__day:hover {
	transform: translateY(-2px) scale(1.05);
	box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2), 0 2px 4px rgba(0, 0, 0, 0.1);
	z-index: 10;
}

/* BEM类名: gc-month-view__day-cell */
.gc-month-view__day-cell:hover {
	background-color: var(--background-modifier-hover);
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* 7.3 Custom Status Colors (from Settings) */
/* 任务卡片背景色和文字颜色 */
.gc-task-card.task-with-status {
	background-color: var(--task-bg-color, var(--background-secondary));
	color: var(--task-text-color, var(--text-normal));
}

/* 状态文字颜色应用到任务文本元素 */
.gc-task-card.task-with-status .gc-task-card__text {
	color: var(--task-text-color, var(--text-normal));
}

/* 状态颜色应用到边框 - 只在没有completed/pending状态时应用 */
.gc-task-card.task-with-status:not(.gc-task-card--completed):not(.gc-task-card--pending) {
	border-left-color: var(--task-bg-color, var(--interactive-accent));
}

/* 已完成任务保持透明度 */
.gc-task-card.task-with-status.gc-task-card--completed {
	opacity: 0.7;
}

/* 7.4 Festival Themes */
/* 年视图节日样式 */
.gc-year-view__lunar-text.festival {
	font-weight: 600;
}

/* 阳历节日 - 使用CSS变量 */
.gc-year-view__lunar-text.festival-solar {
	color: var(--festival-solar-color);
}

/* 农历传统节日 - 使用CSS变量 */
.gc-year-view__lunar-text.festival-lunar {
	color: var(--festival-lunar-color);
}

/* 二十四节气 - 使用CSS变量 */
.gc-year-view__lunar-text.festival-solarTerm {
	color: var(--festival-solar-term-color);
}

/* Month view specific festival styles */
/* BEM类名: gc-month-view__lunar-text--festival */
.gc-month-view__lunar-text--festival {
	font-weight: 600;
}

/* BEM类名: gc-month-view__lunar-text--festival-solar */
.gc-month-view__lunar-text--festival-solar {
	color: var(--festival-solar-color);
}

/* BEM类名: gc-month-view__lunar-text--festival-lunar */
.gc-month-view__lunar-text--festival-lunar {
	color: var(--festival-lunar-color);
}

/* BEM类名: gc-month-view__lunar-text--festival-solar-term */
.gc-month-view__lunar-text--festival-solar-term {
	color: var(--festival-solar-term-color);
}

/* 7.5 Special States */
/* BEM类名: gc-month-view__day-cell--outside-month */
.gc-month-view__day-cell--outside-month {
	background-color: var(--background-secondary);
	opacity: 0.5;
}

.gc-month-view__day-cell--outside-month .gc-month-view__day-number {
	color: var(--text-faint);
}

/* BEM类名: gc-year-view__day.outside-month (年视图非本月日期) */
.gc-year-view__day.outside-month {
	opacity: 0.4;
}

.gc-year-view__day.outside-month .gc-year-view__day-number {
	color: var(--text-faint);
}

.gc-year-view__day.outside-month .gc-year-view__lunar-text {
	color: var(--text-faint);
}

/* Today state */
/* 年视图今天样式：使用伪元素创建红色虚线圆圈，不干扰热力图背景 */
.gc-year-view__day.today {
	position: relative;
}

.gc-year-view__day.today::before {
	content: '';
	position: absolute;
	inset: 4px;
	border: 2px dashed #ff6b6b;
	border-radius: 50%;
	pointer-events: none;
	z-index: 1;
}

/* 确保日期内容在圆圈之上 */
.gc-year-view__day.today > * {
	position: relative;
	z-index: 2;
}

/* 年视图今天的阳历和农历日期显示为红色 */
.gc-year-view__day.today .gc-year-view__day-number {
	color: #ff6b6b;
	font-weight: 600;
}

.gc-year-view__day.today .gc-year-view__lunar-text {
	color: #ff6b6b;
}

/* 月视图今天样式 */
/* BEM类名: gc-month-view__day-cell--today */
.gc-month-view__day-cell--today {
	background-color: #ff6b6b;
	border-color: #ff6b6b;
}

.gc-month-view__day-cell--today .gc-month-view__day-number {
	color: white;
	font-weight: 700;
}

.gc-month-view__day-cell--today .gc-month-view__lunar-text {
	color: rgba(255, 255, 255, 0.9);
}

.gc-week-view__header-cell--today {
	background-color: rgba(255, 107, 107, 0.1);
}

.gc-week-view__header-cell--today .gc-week-view__day-number {
	color: #ff6b6b;
}

.gc-week-view__tasks-column--today {
	background-color: rgba(255, 107, 107, 0.03);
}

/* 7.6 Text Decoration (已完成任务) */
/* 排除自定义状态的已完成任务，使用自定义文字颜色 */
.gc-day-view__task-list .gc-task-card--day.gc-task-card--completed:not(.task-with-status) .gc-task-card__text,
.gc-week-view__tasks-grid .gc-task-card--week.gc-task-card--completed:not(.task-with-status) .gc-task-card__text,
.gc-month-view__tasks .gc-task-card--month.gc-task-card--completed:not(.task-with-status) .gc-task-card__text,
.gc-view--task .gc-task-card--task.gc-task-card--completed:not(.task-with-status) .gc-task-card__text,
.gc-task-card--gantt.gc-task-card--completed:not(.task-with-status) .gc-task-card__text {
	text-decoration: line-through;
	color: var(--text-muted);
}

/* ========================================
   LAYER 8: Trumps (覆盖层)
   Utilities & Overrides
   ======================================== */

/* No utility classes currently defined */
/* Future utility classes can be added here as needed */


/* ============================================
   ============================================
   甘特图样式 (BEM 规范)
   ============================================ */

/* 甘特图容器 */
.gc-gantt-view__container {
	flex: 1 1 auto;
	min-height: 0;
	display: flex;
	flex-direction: column;
	overflow: visible;  /* 改为 visible 以允许内部 sticky 定位生效 */
	width: 100%;
	height: 100%;
}

/* 甘特图根容器 */
.gc-gantt-view__root {
	flex: 1 1 auto;
	min-height: 500px;
	min-width: 100%;
	position: relative;
	overflow: visible;
	background-color: var(--background-primary);
	border-radius: 8px;
	padding: 8px;
}

/* ============================================
   BEM 布局结构 - 单个 Grid 布局
   使用 CSS 变量 --task-column-width 控制任务列宽度
   Grid 结构：
   ┌────────────┬──────────────────────────────┐
   │ 空白区域   │ 时间轴（sticky）             │
   ├────────────┼──────────────────────────────┤
   │ 任务列表   │ 甘特图（双向滚动）           │
   └────────────┴──────────────────────────────┘
   ============================================ */

/* 单个 Grid 容器 - 包含所有甘特图元素 */
.gc-gantt-view__main-grid {
	--task-column-width: 240px;  /* 默认任务列宽度，可通过 JS 动态修改 */

	display: grid;
	grid-template-columns: var(--task-column-width) 4px 1fr;
	grid-template-areas:
		"corner resizer header"
		"tasklist resizer chart";
	grid-template-rows: 50px 1fr;

	width: 100%;
	min-height: 400px;
	gap: 0;
	position: relative;
}

/* 左上角空白区域（sticky） */
.gc-gantt-view__corner {
	grid-area: corner;
	position: sticky;
	top: 8px;
	z-index: 50;
	height: 50px;
	overflow: hidden;
	border-right: 1px solid var(--background-modifier-border);
	border-bottom: 1px solid var(--background-modifier-border);
	background-color: var(--background-secondary);
	min-height: 0;
	min-width: 0;
}

.gc-gantt-view__corner-svg {
	display: block;
}

/* 顶部时间轴容器（sticky，可水平滚动） */
.gc-gantt-view__header {
	grid-area: header;
	position: sticky;
	top: 8px;
	z-index: 50;
	height: 50px;
	overflow-x: auto;
	overflow-y: hidden;
	border-bottom: 1px solid var(--background-modifier-border);
	background-color: var(--background-secondary);
	min-height: 0;
	min-width: 0;
	/* 隐藏滚动条但保留滚动功能 */
	scrollbar-width: none; /* Firefox */
	-ms-overflow-style: none; /* IE 10+ */
}

.gc-gantt-view__header::-webkit-scrollbar {
	display: none; /* Chrome, Safari, Opera */
}

.gc-gantt-view__header-svg {
	display: block;
}

/* 左侧任务列表容器 */
.gc-gantt-view__tasklist {
	grid-area: tasklist;
	overflow-x: hidden;
	overflow-y: auto;
	border-right: 1px solid var(--background-modifier-border);
	background-color: var(--background-primary);
	min-height: 0;
	/* 隐藏滚动条但保留滚动功能 */
	scrollbar-width: none; /* Firefox */
	-ms-overflow-style: none; /* IE 10+ */
}

.gc-gantt-view__tasklist::-webkit-scrollbar {
	display: none; /* Chrome, Safari, Opera */
}

.gc-gantt-view__tasklist-svg {
	display: block;
}

/* 右侧甘特图容器（双向滚动） */
.gc-gantt-view__chart {
	grid-area: chart;
	overflow: auto;
	background-color: var(--background-primary);
	min-height: 0;
}

.gc-gantt-view__chart::-webkit-scrollbar {
	width: 8px;
	height: 8px;
}

.gc-gantt-view__chart::-webkit-scrollbar-track {
	background: var(--background-primary);
}

.gc-gantt-view__chart::-webkit-scrollbar-thumb {
	background: var(--background-modifier-border);
	border-radius: 4px;
}

.gc-gantt-view__chart::-webkit-scrollbar-thumb:hover {
	background: var(--text-muted);
}

/* 分隔条 - 覆盖在 Grid 上，使用绝对定位配合 CSS 变量 */
.gc-gantt-view__resizer {
	position: absolute;
	left: var(--task-column-width);
	top: 0;
	bottom: 0;
	width: 4px;
	background-color: var(--background-modifier-border);
	cursor: col-resize;
	transition: background-color 0.2s ease;
	z-index: 60;
}

.gc-gantt-view__resizer:hover {
	background-color: var(--interactive-accent);
}

.gc-gantt-view__resizer:active {
	background-color: var(--interactive-accent-hover);
}

.gc-gantt-view__chart-svg {
	display: block;
}

/* ========================================
   旧样式兼容（保留以避免破坏现有功能）
   ======================================== */

/* 甘特图容器 */
.gc-gantt-view__container {
	flex: 1 1 auto;
	min-height: 0;
	display: flex;
	flex-direction: column;
	overflow: visible;
	width: 100%;
	height: 100%;
}

/* 甘特图根容器 */
.gc-gantt-view__root {
	flex: 1 1 auto;
	min-height: 500px;
	min-width: 100%;
	position: relative;
	overflow: visible;
	background-color: var(--background-primary);
	border-radius: 8px;
	padding: 8px;
}

/* Sticky 时间线容器（旧版，保留兼容） */
.gc-gantt-view__sticky-header {
	display: grid;
	grid-template-columns: 240px 4px 1fr;
	grid-template-areas: "corner resizer header";
	position: sticky;
	top: 8px;
	z-index: 50;
	background-color: var(--background-secondary);
	border-radius: 8px 8px 0 0;
	height: 50px;
	flex-shrink: 0;
}

/* Sticky 区域的分隔条不响应鼠标事件 */
.gc-gantt-view__sticky-header .gc-gantt-view__resizer {
	pointer-events: none;
}

/* 主布局容器（旧版，保留兼容） */
.gc-gantt-view__layout {
	display: grid;
	grid-template-columns: 240px 4px 1fr;
	grid-template-areas: "tasklist resizer chart";
	width: 100%;
	min-height: 400px;
	gap: 0;
	overflow: hidden;
}

/* 旧版类名兼容 */
.gc-gantt-view__header-container {
	grid-area: header;
	overflow-x: auto;
	overflow-y: hidden;
	border-bottom: 1px solid var(--background-modifier-border);
	background-color: var(--background-secondary);
	min-height: 0;
	min-width: 0;
	scrollbar-width: none;
	-ms-overflow-style: none;
}

.gc-gantt-view__header-container::-webkit-scrollbar {
	display: none;
}

.gc-gantt-view__tasklist-container {
	grid-area: tasklist;
	overflow-x: hidden;
	overflow-y: auto;
	border-right: 1px solid var(--background-modifier-border);
	background-color: var(--background-primary);
	min-height: 0;
	scrollbar-width: none;
	-ms-overflow-style: none;
}

.gc-gantt-view__tasklist-container::-webkit-scrollbar {
	display: none;
}

.gc-gantt-view__chart-container {
	grid-area: chart;
	overflow: auto;
	background-color: var(--background-primary);
	min-height: 0;
}

/* ============================================
   甘特图内部元素样式
   ============================================ */

/* 甘特图网格 */
.gc-gantt-view__grid line {
	stroke: var(--background-modifier-border);
	stroke-width: 1;
}

/* 甘特图任务条 */
.gc-gantt-view__bar-group rect {
	transition: all 0.15s ease;
	cursor: pointer;
}

.gc-gantt-view__bar-group:hover rect {
	opacity: 1 !important;
	filter: brightness(1.1);
}

/* 任务状态颜色 */
.gc-gantt-view__bar-group .task-completed {
	fill: var(--task-completed-color, #52c41a);
}

.gc-gantt-view__bar-group .task-cancelled {
	fill: var(--text-muted, #999);
	opacity: 0.5;
}

/* 优先级颜色 */
.gc-gantt-view__bar-group .priority-highest {
	fill: var(--priority-highest-color, #ef4444);
}

.gc-gantt-view__bar-group .priority-high {
	fill: var(--priority-high-color, #f97316);
}

.gc-gantt-view__bar-group .priority-medium {
	fill: var(--priority-medium-color, #eab308);
}

.gc-gantt-view__bar-group .priority-low {
	fill: var(--priority-low-color, #22c55e);
}

.gc-gantt-view__bar-group .priority-lowest {
	fill: var(--priority-lowest-color, #3b82f6);
}

/* ============================================
   其他甘特图样式
   ============================================ */

/* 任务标签文字 */
.gc-gantt-view__bar-group text {
	font-family: var(--font-ui-medium);
	-webkit-user-select: none;
	user-select: none;
	pointer-events: none;
}

/* 任务复选框 */
.gc-gantt-view__task-checkbox {
	flex-shrink: 0;
	width: 16px;
	height: 16px;
	cursor: pointer;
	margin: 0;
	accent-color: var(--interactive-accent);
}

/* 拖动手柄 */
.gc-gantt-view__handle-left,
.gc-gantt-view__handle-right {
	opacity: 0.5;
	transition: opacity 0.15s ease;
}

.gc-gantt-view__bar-group:hover .gc-gantt-view__handle-left,
.gc-gantt-view__bar-group:hover .gc-gantt-view__handle-right {
	opacity: 1;
}


/* 空状态 */
.gantt-empty-state {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	padding: 60px 20px;
	text-align: center;
	color: var(--text-muted);
}

.gantt-empty-icon {
	font-size: 48px;
	margin-bottom: 16px;
	opacity: 0.5;
}

.gantt-empty-title {
	font-size: 18px;
	font-weight: 600;
	color: var(--text-normal);
	margin-bottom: 8px;
}

.gantt-empty-reason {
	font-size: 14px;
	color: var(--text-muted);
	margin-bottom: 4px;
}

.gantt-empty-hint {
	font-size: 12px;
	color: var(--text-faint);
}

/* 错误状态 */
.gantt-error {
	padding: 16px;
	background-color: var(--background-secondary);
	border: 1px solid var(--text-error);
	border-radius: 8px;
	color: var(--text-error);
	text-align: center;
}

/* 控制面板 */
.gantt-control-panel {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 8px 16px;
	background-color: var(--background-secondary);
	border-radius: 8px;
	margin-bottom: 12px;
}

.gantt-stats {
	display: flex;
	gap: 16px;
	align-items: center;
}

.gantt-stat-item {
	font-size: 13px;
	color: var(--text-muted);
}

.gantt-stat-item strong {
	color: var(--text-normal);
	font-weight: 600;
}


.gc-tag--popup {
	display: inline-block;
	padding: 2px 6px;
	margin-right: 4px;
	margin-bottom: 4px;
	background-color: var(--tag-background);
	color: var(--tag-color);
	border-radius: 4px;
	font-size: 11px;
}

/* 响应式适配 */
@media (max-width: 768px) {
	.gc-gantt-view__root {
		min-height: 300px;
		padding: 8px;
	}

	.gantt-control-panel {
		flex-direction: column;
		align-items: flex-start;
		gap: 8px;
	}

	.gantt-stats {
		flex-direction: column;
		gap: 4px;
		align-items: flex-start;
	}
}

/* ========================================
   创建任务弹窗样式
   ======================================== */

/* 创建任务弹窗 */
.gc-create-task-modal {
	max-width: 600px;
}

.gc-create-task-modal__form {
	display: flex;
	flex-direction: column;
	gap: 16px;
}

.gc-create-task-modal__field {
	display: flex;
	flex-direction: column;
	gap: 6px;
}

.gc-create-task-modal__label {
	font-weight: 500;
	font-size: var(--font-ui-small);
	color: var(--text-muted);
}

.gc-create-task-modal__input,
.gc-create-task-modal__textarea {
	width: 100%;
	padding: 8px 12px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	background: var(--background-primary);
	color: var(--text-normal);
	font-family: var(--font-interface);
	font-size: var(--font-ui-small);
}

.gc-create-task-modal__input:focus,
.gc-create-task-modal__textarea:focus {
	border-color: var(--interactive-accent);
	outline: none;
}

.gc-create-task-modal__textarea {
	min-height: 80px;
	resize: vertical;
	line-height: 1.5;
}

.gc-create-task-modal__tags-container {
	display: flex;
	flex-direction: column;
	gap: 8px;
}

.gc-create-task-modal__tag-item {
	display: inline-block;
	padding: 4px 10px;
	margin: 0;
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	background: var(--background-secondary);
	color: var(--text-normal);
	font-size: var(--font-ui-smaller);
	cursor: pointer;
	transition: all 0.2s ease;
	user-select: none;
}

.gc-create-task-modal__tag-item:hover {
	background: var(--background-modifier-hover);
}

.gc-create-task-modal__tag-item--selected {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-color: var(--interactive-accent);
}

.gc-create-task-modal__tag-input {
	flex: 1;
}

.gc-create-task-modal__buttons {
	display: flex;
	justify-content: flex-end;
	gap: 12px;
	margin-top: 8px;
	padding-top: 16px;
	border-top: 1px solid var(--background-modifier-border);
}

/* 创建任务按钮 */
.gc-create-task-btn {
	font-size: 1.2em;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	transition: transform 0.1s ease;
}

.gc-create-task-btn:active {
	transform: scale(0.95);
}

.gc-create-task-btn--toolbar {
	padding: 4px 8px;
	min-width: 32px;
}

/* ============================================
   甘特图行悬停高亮样式
   ============================================ */

/* 基础行背景 */
.gc-gantt-view__row-bg {
	transition: fill 0.15s ease, opacity 0.15s ease;
}

/* 行高亮状态 */
.gc-gantt-view__row-highlight {
	fill: var(--background-modifier-hover) !important;
	opacity: 1 !important;
}
